window.repositoryObject = {"parameters":[{"name":"Returns","description":null,"mode":"OUT","data_type":"varchar(256)","custom_fields":{},"linked_terms":[]},{"name":"url","description":null,"mode":"IN","data_type":"varchar(250)","custom_fields":{},"linked_terms":[]}],"parameters_custom_fields":[],"dependencies":{"uses":[],"used_by":[]},"object_id":"f24","name":"get_domain","subtype":"FUNCTION","is_user_defined":false,"description":null,"summary":[{"field":"Documentation","value":{"_type":"link","name":"Cleverads","id":"d6"}},{"field":"Name","value":"get_domain"},{"field":"Type","value":"Function"}],"script":"BEGIN\r\n    IF (url = 'n/d') THEN\r\n        RETURN url;\r\n    ELSE\r\n        SET url = SUBSTRING_INDEX(SUBSTRING_INDEX(SUBSTRING_INDEX(TRIM(LEADING \"https://\" FROM TRIM(LEADING \"http://\" FROM TRIM(SUBSTRING_INDEX(TRIM(LEADING \"https://\" FROM TRIM(LEADING \"http://\" FROM TRIM(SUBSTRING_INDEX(TRIM(LEADING \"https://\" FROM TRIM(LEADING \"http://\" FROM TRIM(url))), \"?\", 1)))), \"&\", 1)))), \"/\", 1), \":\",1), \".\", IF(url LIKE \"%.org.__%\" OR url LIKE \"%.net.__%\" OR url LIKE \"%.com.__%\" OR url LIKE \"%.__.us%\" OR url LIKE \"%.co.__%\" OR url LIKE \"%.__.uk%\", -3, -2));\r\n        -- IF (url REGEXP '[[:<:]][\\.A-Za-z0-9\\-]+\\.[a-zA-Z]{2,4}[[:>:]]|[[:digit:]]+\\.[[:digit:]]+\\.[[:digit:]]+\\.[[:digit:]]+') THEN\r\n        IF (REGEXP_SUBSTR(url, '\\w+\\.\\w+(?=/|$)')<>'') THEN\r\n            RETURN url;\r\n        ELSE \r\n            RETURN 'n/d';\r\n        END IF;\r\n    END IF;\r\nEND","imported_at":"2024-06-28 17:00"};