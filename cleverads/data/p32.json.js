window.repositoryObject = {"parameters":[{"name":"$_id","description":null,"mode":"IN","data_type":"int(10, 0)","custom_fields":{},"linked_terms":[]}],"parameters_custom_fields":[],"dependencies":{"uses":[],"used_by":[]},"object_id":"p32","name":"v1_app_trackers_mmp_device_code_parameters","subtype":"PROCEDURE","is_user_defined":false,"description":null,"summary":[{"field":"Documentation","value":{"_type":"link","name":"Cleverads","id":"d6"}},{"field":"Name","value":"v1_app_trackers_mmp_device_code_parameters"},{"field":"Type","value":"Procedure"}],"script":"BEGIN\r\nSET $_id = IFNULL($_id,0);\r\nSELECT\r\n \t t.legacy_id,\r\n\t  Case\r\n\t\t  When vbar.region_type = 'C' Then \r\n\t\t  \tvbar.iso_country\r\n\t  \t  When vbar.region_type = 'S' Then\r\n\t  \t\tConcat((Select bar1.iso_country From vw_brands_account_region bar1 Where bar1.id = vbar.region_parent_id Limit 1), ' - ', vbar.iso_country)\r\n\tEnd As CountryCode,\r\n\tt.device_code,\r\n\tmp.name_mmp_parameter,\r\n\ttmp.value,\r\n\ts.id,\r\n\tc.lead_id as publisher_id,\r\n\tl.name as publisher_name,\r\n\ts.legacy_id AS campaignidclever,\r\n    s.legacy_id as script_legacy_id,\r\n    t.legacy_id as tracker_legacy_id\r\n \tFROM \r\n \t\tmmp m \r\n\tinner join mmp_parameters mp on m.mmp_id=mp.mmp_id  \r\n \tinner  join trackers_mmp_parameters tmp on tmp.mmp_parameter_id=mp.mmp_parameter_id\r\n\tinner join\r\n\t\ttrackers t on t.id=tmp.tracker_id\r\n    inner join scripts s on s.id  = t.script_id \r\n    inner join codes c on s.code_id =c.id \r\n    inner join leads l  on c.lead_id =l.id  \r\n    inner join vw_brands_account_region vbar on vbar.brands_account_id =t.brand_account_id and t.region_id=vbar.id\r\n   where \r\n   \t\ts.legacy_id=$_id \r\n   \t\tand name_mmp_parameter not in ('CampaignID','publisherid','CountryCode')\r\n\t    and t.deleted_at='0000-00-00 00:00:00'\r\n\t    and t.legacy_id is not NULL;\r\nEND","imported_at":"2024-06-28 17:00"};